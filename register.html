<!doctype HTML>
<html>
<head>
    <head>
        <title>IowaAir</title>
        <link rel="icon" href="/img/lolo.pgn" />
        <link rel="stylesheet" href="/css/login.css" type="text/css">
        <link rel="stylesheet" href="/css/register.css" type="text/css">
        <script type="text/javascript" src="/js/md5.js"></script>
        <script type="text/javascript" src="/js/logsess.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    </head>

<body>

<div id="hdr">
    <div id="home" >
        <a id="homel" href="/"><img id="logo" src="img/Logo1465.png" ></img><img id="namelogo" src="img/NameLogo.png"/></a>
    </div>
</div>

<div id="main">
    <div id = "registration">
        <div id = "registrationhead"> ACCOUNT REGISTRATION </div> <br>
        <div id="missingErr" style="display: none; color:red">-One more more fields were left empty</div>
        <div id="invalidEmail" style="display: none; color:red">-Invalid email</div>
        <div id="emailInUse" style="display: none; color:red">-Email is already in use</div>
        <form id="regform">
            <br/>
            <div id="fnamediv">
                <label for="fnamein" id="fnamelab">First Name:</label>
                <input type="text" id="fnamein" name="fnamein" form="regform"/>
            </div>
            <br/>
            <div id="lnamediv">
                <label for="lnamein" id="lnamelab">Last Name:</label>
                <input type="text" id="lnamein" name="lnamein" form="regform"/>
            </div>
            <br/>
            <div id="emaildiv">
                <label for="emailin" id="emaillab">Email:</label>
                <input type="text" id="emailin" name="emailin" form="regform"/>
            </div>
            <br/>
            <div id="phonediv">
                <label for="phonein" id="phonelab">Phone Number:</label>
                <input type="text" id="phonein" name="phonein" form="regform"/>
            </div>
            <br/>
            <div id="regbutdiv">
                <input type="button" onClick="validateForm()" value="register" id="regbut"/>
            </div>
            <br/>
        </form>
    </div>
</div>
</body>
<script>
    homesession();
    //command possibility 1:"/node/command?firstname=string1&lastname=string2&email=string3&phonenumber=string4&password=string5&confirmpassword=string6"
    //Server should insert the inputted data into the Customer Table
</script>
<script>
    function validateForm(){
        var missingFlag = false;
        var emailFlag = false;

        document.getElementById('missingErr').style.display = 'none';
        document.getElementById('invalidEmail').style.display = 'none';
        document.getElementById('emailInUse').style.display = 'none';

        if(!(document.getElementById('fnamein').value)){
            document.getElementById('fnamelab').style.color = 'red';
            missingFlag = true;
        }
        if(!(document.getElementById('lnamein').value)){
            document.getElementById('lnamelab').style.color = 'red';
            missingFlag = true;
        }
        if(!(document.getElementById('emailin').value)){
            document.getElementById('emaillab').style.color = 'red';
            missingFlag = true;
        }
        else{
            var emailMatch = document.getElementById('emailin').value.match(/[A-Za-z0-9]+([.\-_][A-Za-z0-9]+)*@[A-Za-z0-9]+([.\-_][A-Za-z0-9]+)*\.[A-Za-z]+/g)
            console.log(emailMatch);
            if(emailMatch && document.getElementById('emailin').value != emailMatch[0]){
                console.log("incorrect");
                emailFlag = true;
            }
            else{
                console.log("correct");
            }

        }

        if(missingFlag || emailFlag){
            if(missingFlag){
                document.getElementById('missingErr').style.display = 'block';
            }
            if(emailFlag){
                document.getElementById('invalidEmail').style.display = 'block';
            }
        }

    }
</script>
</html>